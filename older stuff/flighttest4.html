<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: SVG bar chart with value labels (centered)</title>
		<script type="text/javascript" src="../d3.js"></script>
		<style type="text/css">
			/* No style rules here yet */		
		</style>
	</head>
	<body>
	<header>

    </header>

      <section>

      </section>
	<h1> YOU WILL MAKE IT </h1>	
		<script type="text/javascript">


		    var header = document.querySelector('header');
		    var section = document.querySelector('section');
		
			var w = 500;
			var h = 100;
			var barPadding = 1;
			
			//Create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h)
						.attr("fill", "#f1f2f3")
						.attr("color"," #f1f2f3");


		    var requestURL = '/data.json';
		    var request = new XMLHttpRequest();
		    
		    request.open('GET', requestURL);
		    request.responseType = 'json';
		    request.send();

		    request.onload = function() {
		      var flights = request.response;
		      populateHeader(flights);
		      createBars(flights);
		    console.log(flights)
		    }


      	
		      function populateHeader(jsonObj) {
		      var myH1 = document.createElement('h1');
		      myH1.textContent = jsonObj['flightId'];
		      header.appendChild(myH1);

		      var myPara = document.createElement('p');
		      myPara.textContent = 'Destination: ' + jsonObj['arrivalAirportEnglish'] + ' // Departure Time: ' + jsonObj['departureTime'];
		      header.appendChild(myPara);
		    }

		function createBars(jsonObj){
		flightid = jsonObj['flightId'];

		for (var i = 0; i < jsonObj.length; i++) {
	    svg.selectAll("rect")
			   .data(flightid)
			   .enter()
			   .append("rect")
			   .attr("x", function(d, i) {
			   		return i * (w / dataset.length);
			   })
			   .attr("y", function(d) {
			   		return h - (d * 4);
			   })
			   .attr("width", 50)
			   .attr("height", function(d) {
			   		return d * 4;
			   })
			   .attr("fill", function(d) {
					return "rgb(0, 0, " + Math.round(d * 10) + ")";
			   });}
			

}
			// svg.selectAll("text")
			//    .data(flightID)
			//    .enter()
			//    .append("text")
			//    .text(function(d) {
			//    		return d;
			//    })
			//    .attr("text-anchor", "middle")
			//    .attr("x", function(d, i) {
			//    		return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
			//    })
			//    .attr("y", function(d) {
			//    		return h - (d * 4) + 14;
			//    })
			//    .attr("font-family", "sans-serif")
			//    .attr("font-size", "11px")
			//    .attr("fill", "white");

			// }};
			
		</script>

	</body>
</html>
			   
